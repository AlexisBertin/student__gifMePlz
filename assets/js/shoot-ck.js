$(document).ready(function(){function u(e){if(e<8){var t=new Array("neutral","hate","joy","disgust","sadness","fear","surprise","pain");$(".word").html(t[e]+" <span>"+(e+1)+" / 8</span>");s=3;var n=setInterval(function(){$(".timerCount").html(s);s--;if(s<0){s=3;a(e,s);window.clearInterval(n)}},1e3)}else{$("#camera").fadeOut(300,function(){$(this).css({opacity:"0",display:"none"});f()});e=0;s=0}}function a(e){if(!i)return!1;webcam.freeze();c();setTimeout(function(){webcam.upload();webcam.reset();c();setTimeout(function(){e++;u(e)},300)},500)}function f(){$.ajax({url:"photoSummary.inc.php",cache:!1,success:function(e){$(".summaryPhotoContainer").html(e)},error:function(e,t,n){alert(t)}});$(".photoSummary").hide().queue(function(){$(this).css({display:"block",opacity:"1"});$(".photoSummary h2").fadeIn(200,function(){$(".summaryPhotoContainer").fadeIn(200)})})}function c(){var e=$("#camera .buttonPane:visible:first"),t=$("#camera .buttonPane:hidden:first");e.fadeOut("fast",function(){t.show()})}function h(e,t){return e.replace(/{([^}]+)}/g,function(e,n){return t[n.toLowerCase()]})}var e=$("#camera"),t=$("#photos"),n=$("#screen"),r='<div class="pic" style="background: url(uploads/thumbs/{src})"><span rel="cam" "></span></div>';webcam.set_swf_url("assets/webcam/webcam.swf");webcam.set_api_url("upload.inc.php");webcam.set_quality(100);webcam.set_shutter_sound(!0,"assets/webcam/shutter.mp3");n.html(webcam.get_html(n.width(),n.height()));var i=!1,s=3,o=0;$("#shootButton").click(function(){$(this).fadeOut();$(".word").html("neutral <span>1 / 8</span>").fadeIn();$(".timer").fadeIn();$(".timerCount").html(3);u(0)});$("#cancelButton").click(function(){webcam.reset();c();return!1});$("#uploadButton").click(function(){webcam.upload();webcam.reset();c();return!1});e.find(".settings").click(function(){if(!i)return!1;webcam.configure("camera")});var l=!1;$(".camTop").click(function(){$(".tooltip").fadeOut("fast");l?e.animate({bottom:-466}):e.animate({bottom:-5},{easing:"easeOutExpo",duration:"slow"});l=!l});$(".tooltip").mouseenter(function(){$(this).fadeOut("fast")});webcam.set_hook("onLoad",function(){i=!0});webcam.set_hook("onComplete",function(e){e=$.parseJSON(e);if(e.error)alert(e.message);else{t.prepend(h(r,{src:e.filename}));initFancyBox()}});webcam.set_hook("onError",function(e){n.html(e)})});