$(document).ready(function(){function u(){if(this!=window){if($(this).html()=="Loading..")return!1;$(this).html("Loading..")}$.getJSON("browse.php",{start:o},function(e){t.find("a").show();var n=$("#loadMore").detach();n.length||(n=$("<span>",{id:"loadMore",html:"Load More",click:u}));$.each(e.files,function(e,n){t.append(f(r,{src:n}))});if(e.nextStart){o=e.nextStart;t.find("a:last").hide();t.append(n.html("Load More"))}});return!1}function a(){var e=$("#camera .buttonPane:visible:first"),t=$("#camera .buttonPane:hidden:first");e.fadeOut("fast",function(){t.show()})}function f(e,t){return e.replace(/{([^}]+)}/g,function(e,n){return t[n.toLowerCase()]})}var e=$("#camera"),t=$("#photos"),n=$("#screen"),r='<div class="pic" style="background: url(uploads/thumbs/{src})"><span rel="cam" "></span></div>';webcam.set_swf_url("assets/webcam/webcam.swf");webcam.set_api_url("upload.php");webcam.set_quality(100);webcam.set_shutter_sound(!0,"assets/webcam/shutter.mp3");n.html(webcam.get_html(n.width(),n.height()));var i=!1;$("#shootButton").click(function(){var e=0,t=setInterval(function(){if(e<shotNumber){if(!i)return!1;webcam.freeze();a();setTimeout(function(){webcam.upload();webcam.reset();a()},100);webcam.reset();e++}else{window.clearInterval(t);e=0}},2e3);return!1});$("#cancelButton").click(function(){webcam.reset();a();return!1});$("#uploadButton").click(function(){webcam.upload();webcam.reset();a();return!1});e.find(".settings").click(function(){if(!i)return!1;webcam.configure("camera")});var s=!1;$(".camTop").click(function(){$(".tooltip").fadeOut("fast");s?e.animate({bottom:-466}):e.animate({bottom:-5},{easing:"easeOutExpo",duration:"slow"});s=!s});$(".tooltip").mouseenter(function(){$(this).fadeOut("fast")});webcam.set_hook("onLoad",function(){i=!0});webcam.set_hook("onComplete",function(e){e=$.parseJSON(e);if(e.error)alert(e.message);else{t.prepend(f(r,{src:e.filename}));initFancyBox()}});webcam.set_hook("onError",function(e){n.html(e)});var o="";u()});